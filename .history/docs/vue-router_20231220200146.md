# vue-router

## 1. vue-router的路由守卫

- 全局前置守卫

```js
router.beforeEach((to, from, next) => {
    // to: 即将进入的目标
    // from:当前导航正要离开的路由
    return false // 返回false用于取消导航
    return {name: 'Login'} // 返回到对应name的页面
    next({name: 'Login'}) // 进入到对应的页面
    next() // 放行
})
```

- 全局解析守卫:类似beforeEach

```js
router.beforeResolve(to => {
    if(to.meta.canCopy) {
        return false // 也可取消导航
    }
})
```

- 全局后置钩子

```js
router.afterEach((to, from) => {
    logInfo(to.fullPath)
})
```

- 导航错误钩子，导航发生错误调用

```js
router.onError(error => {
    logError(error)
})
```

- 路由独享守卫,beforeEnter可以传入单个函数，也可传入多个函数。

```js
function dealParams(to) {
    // ...
}
function dealPermission(to) {
    // ...
}

const routes = [
    {
        path: '/home',
        component: Home,
        beforeEnter: (to, from) => {
            return false // 取消导航
        },
        // beforeEnter: [dealParams, dealPermission]
    }
]
```

### 组件内的守卫

```js
const Home = {
    template: `...`,
    beforeRouteEnter(to, from) {
        // 此时组件实例还未被创建，不能获取this
    },
    beforeRouteUpdate(to, from) {
        // 当前路由改变，但是组件被复用的时候调用，此时组件已挂载好
    },
    beforeRouteLeave(to, from) {
        // 导航离开渲染组件的对应路由时调用
    }
}
```

## 2. 说一下路由传参方式query和params的区别？

1. 传参方式
    - query通过path进行跳转传参，接收的时候通过this.$route.query进行接收
    - params通过name进行跳转传参，接收的时候通过this.$route.params进行接收
2. 安全性
    - params传值不会显示到地址栏，安全性高，但页面刷新数据会丢失
    - query传值会暴露在地址栏，页面刷新不会丢失
    
