# 手写题

## 手写一个深拷贝

```js
function deepClone(obj){
    if(typeof obj !== 'object' || typeof obj === null) return obj;

    const result = obj instanceof Array? []: {}

    for(let key in obj){

        result[key] = deepClone(obj[key])
        //浅拷贝 resutl[key] = obj[key]
    } 
    return result;
}

const obj = {a: 1, b: {c:3}, d: 5}
const objClone = deepClone(obj)
obj.a = 123
console.log(obj) //{a: 123, b: {…}, d: 5}
console.log(objClone) //{a: 1, b: {…}, d: 5}
```

## 手写防抖和节流函数

### 停止触发事件n毫秒后执行回调函数

触发事件后函数不会立即执行，而是在停止事件触发后 n 毫秒后执行，如果在 n 毫秒内又触发了事件，则会重新计时

```js
function debounce(fn, delay){
    let timer = null;

    return function(){

        if(timer) clearTimeOut(timer)

        timer = setTimeOut(() => {
            fn.apply(this, arguments)
            timer = null
        }, delay)
    }
}
```

### 触发事件后立即执行回调函数，但是触发后n毫秒内不会再执行回调函数，如果 n 毫秒内触发了事件，也会重新计时。

```js
function debounce(fn, delay){
    let timer;

    return function(){

        let isImmediate = !timer

        if(timer) clear
        
        timer = setTimeOut(() => {
            fn.apply(this, arguments)
        }, delay)

        if(isImmediate) {
            fn.apply(this, arguments)
            clearTimeOut(timer)
        }
    }
}
```

