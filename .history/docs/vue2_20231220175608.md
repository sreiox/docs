# vue2

## 0. 原理解读

### defineProperty/get/set

```js
//Object.defineProperty(obj, 'foo', {configurable: true, writable: true, enumable: true})
function convert(obj){
    Object.keys(obj).forEach(key => {
        let initalValue = obj[key];
        Object.defineProperty(obj, key, {
            get () {
                return initalValue
            }
            set (newValue) {
                initalValue = newValue
            }
        })
    })
}
```

### 依赖追踪（订阅者模式）

```js
window.Dep = Class Dep {
    constructor(){
        this.subscribers = new Set()
    }

    depend(){
        // 依赖收集
        if(activeUpdate){
            this.subscribers.add(activeUpdate)
        }
    }

    notify(){
        // 通知订阅者执行
        this.subscribers.forEach(sub => sub())
    }
}

let activeUpdate

function autorun(update){
    // activeUpdate本质记录正在执行
    function wrappedUpdate{
        activeUpdate = wrappedUpdate
        update()
        activeUpdate = null
    }

    wrappedUpdate()
}

const dep = new Dep()
autorun(() => {
    dep.depend()
})
```

```js
let state = { count: 0 }
// 首先对象通过defineproperty开启监控
obeserve(state)

autorun(() => {
    console.log(state.count)
})

state.count++
```

## 1. 什么是Vue以及Vue的特点

vue是一套用于构建用户界面的渐进式（自底向上逐层应用）js框架

1. 组件化开发
2. 无需操作DOM
3. 使用虚拟DOM和diff算法复用DOM节点

## 2. SPA及其优缺点

SPA:signal page application，单一页面应用。

一旦页面加载完成，不会因为用户在浏览器上的操作而进行`跳转`、`刷新`，取而代之的是利用`路由机制实现的HTML内容的变换`、UI和用户的交互，`避免`页面的`重新加载`。

数据需要通过ajax请求获取。

优点：

1. 避免不必要的跳转和重复渲染，提高了用户的体验，减轻了服务器的压力。
2. `前后端分离`，使架构更加清晰。